---
layout: page.liquid
title: Research Projects
---

<h1 class="page-title">Research Projects</h1>
<div class="filter-box" id="interest-filters">
	<h3>Filter by Research Interests <button class="more-interests">↓</button></h3>
  <!-- ↑ -->
	{% assign all_interests = "" %} 
	{% for project in collections.projects %} 
		{% if project.data.research_interests %} 
			{% for interest in project.data.research_interests %} 
			{% unless all_interests contains interest %} 
			{% assign all_interests = all_interests | append: interest | append: ',' %} 
			{% endunless %} 
			{% endfor %} 
		{% endif %} 
	{% endfor %} 
	{% assign unique_interests = all_interests | split: ',' | uniq %}
	{% for interest in unique_interests %} 
    {% if interest != "" %}
	    <button class="interest-btn" data-interest="{{ interest }}">{{ interest }}</button>
	  {% endif %} 
  {% endfor %}
  <div class="blurry-zone"></div>
</div>


<div class="filter-box" id="kind-filters">
  <h3>Filter by Project Kind</h3>
  {% assign all_kinds = "" %}
  {% for project in collections.projects %}
    {% if project.data.project-kind %}
      {% unless all_kinds contains project.data["project-kind"] %}
        {% assign all_kinds = all_kinds | append: project.data["project-kind"] | append: ',' %}
      {% endunless %}
    {% endif %}
  {% endfor %}
  {% assign unique_kinds = all_kinds | split: ',' | uniq %}
  {% for kind in unique_kinds %}
    {% if kind != "" %}
      <button class="kind-btn" data-kind="{{ kind }}">{{ kind }}</button>
    {% endif %}
  {% endfor %}
</div>



{% assign sorted_projects = collections.projects | sort: "data.title" %}

{% assign has_ongoing = false %}
{% for project in sorted_projects %}
  {% if project.data.ongoing %}
    {% assign has_ongoing = true %}
    {% break %}
  {% endif %}
{% endfor %}

{% assign has_finished = false %}
{% for project in sorted_projects %}
  {% unless project.data.ongoing %}
    {% assign has_finished = true %}
    {% break %}
  {% endunless %}
{% endfor %}

{% if has_ongoing %}
<br>
<br>
  <h2>Ongoing Projects</h2>
  <div class="projects-grid">
  {% for project in sorted_projects %}
    {% if project.data.ongoing %}
      <!-- render card -->
    <a
      class="project-card"
      href="{{ project.url }}"
      data-interests="{% if project.data.research_interests %}{{ project.data.research_interests | join: ',' }}{% endif %}"
      data-kind="{{ project.data['project-kind'] }}"
    >
      {% if project.data.main_image %}
        <img src="{{ project.data.main_image | url }}" alt="Image for {{ project.data.main_image_credits }}" class="project-thumb" />
      {% endif %}
      <div class="project-info">
        <h2 class="project-title">{{ project.data.title }}</h2>
        {% if project.data.project-kind %}
          <p class="project-kind">{{ project.data.project-kind }}</p>
        {% endif %}
        {% if project.data.research_interests %}
          <div class="project-interests">
            {% for interest in project.data.research_interests %}
        <span class="interest-tag">{{ interest }}</span>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </a>
    {% endif %}
  {% endfor %}
{% endif %}
  </div>
{% if has_finished %}

  <h2>Completed Projects</h2>
  <div class="projects-grid">
  {% for project in sorted_projects %}
    {% unless project.data.ongoing %}
      <!-- render card -->
      <a
        class="project-card"
        href="{{ project.url }}"
        data-interests="{% if project.data.research_interests %}{{ project.data.research_interests | join: ',' }}{% endif %}"
        data-kind="{{ project.data['project-kind'] }}"
      >
        {% if project.data.main_image %}
          <img src="{{ project.data.main_image | url }}" alt="Image for {{ project.data.main_image_credits }}" class="project-thumb" />
        {% endif %}
        <div class="project-info">
          <h2 class="project-title">{{ project.data.title }}</h2>
          {% if project.data.project-kind %}
            <p class="project-kind">{{ project.data.project-kind }}</p>
          {% endif %}
          {% if project.data.abstract %}
            <p class="project-abstract">{{ project.data.abstract | truncate: 120 }}</p>
          {% endif %}
          {% if project.data.research_interests %}
            <div class="project-interests">
              {% for interest in project.data.research_interests %}
                <span class="interest-tag">{{ interest }}</span>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </a>
    {% endunless %}
  {% endfor %}
	{% endif %}

</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
 
  document.querySelectorAll(".interest-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      btn.classList.toggle("active");
      filterProjects();
    });
  });
  document.querySelectorAll(".kind-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      btn.classList.toggle("active");
      filterProjects();
    });
  });

  function normalize(str) {
    return (str || "").trim().toLowerCase();
  }

  function filterProjects() {
    const activeInterests = Array.from(document.querySelectorAll(".interest-btn.active"))
      .map(b => normalize(b.dataset.interest));

    const activeKinds = Array.from(document.querySelectorAll(".kind-btn.active"))
      .map(b => normalize(b.dataset.kind));

    const projects = document.querySelectorAll(".project-card");

    projects.forEach(project => {
      const projectInterests = (project.getAttribute("data-interests") || "")
        .split(",")
        .map(normalize);

      const projectKind = normalize(project.getAttribute("data-kind"));

      const matchesInterest =
        activeInterests.length === 0 ||
        activeInterests.some(i => projectInterests.includes(i));

      const matchesKind =
        activeKinds.length === 0 || activeKinds.includes(projectKind);

      project.style.display = matchesInterest && matchesKind ? "block" : "none";
    });
  }
});

var navclick = document.getElementsByClassName("more-interests");
var element = document.getElementById("interest-filters");
for (var i = 0; i < navclick.length; i++) {
  navclick[i].onclick = function(e) {
    element.classList.toggle('expand-filters');
  }
}


</script>


